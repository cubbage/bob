<!DOCTYPE html>
<html>

<head>
  <title>Inline Semantic Test</title>
  <style>
    .preview {
      border: 1px solid #ccc;
      padding: 1rem;
      margin: 1rem 0;
      min-height: 100px;
      white-space: pre-wrap;
    }

    .word {
      padding: 2px 3px;
      border-radius: 3px;
      display: inline-block;
      margin: 1px;
    }
  </style>
</head>

<body>
  <h1>Inline Semantic Structure Test</h1>

  <div>
    <h3>Test Cases:</h3>
    <ul>
      <li><strong>Basic semantic structure</strong> - should show italic with dotted underline</li>
      <li><strong>Semantic + Object styles</strong> - should show both red color AND italic</li>
      <li><strong>Promoted semantic</strong> - should show bold label when promoted</li>
    </ul>
  </div>

  <div>
    <h3>Output:</h3>
    <div id="preview" class="preview"></div>
  </div>

  <script>
    function createSemanticStructure(components, styles = {}) {
      const container = document.createElement('span');
      container.className = 'word';
      container.style.borderBottom = '1px dotted #ccc';
      container.style.cursor = 'pointer';
      container.title = `Semantic structure: ${components.relationship}`;

      // Create label span (if promoted)
      if (components.label && styles.isPromoted) {
        const labelSpan = document.createElement('span');
        labelSpan.textContent = components.label;
        labelSpan.style.fontWeight = 'bold';
        if (styles.color) labelSpan.style.color = styles.color;
        container.appendChild(labelSpan);

        const separator = document.createElement('span');
        separator.textContent = ': ';
        if (styles.color) separator.style.color = styles.color;
        container.appendChild(separator);
      }

      // Create source text span
      const sourceSpan = document.createElement('span');
      sourceSpan.textContent = components.sourceText;
      if (styles.color) sourceSpan.style.color = styles.color;
      container.appendChild(sourceSpan);

      // Create summary span (italic)
      if (components.summary) {
        const summarySpan = document.createElement('span');
        summarySpan.textContent = ` (${components.summary})`;
        summarySpan.style.fontStyle = 'italic';
        if (styles.color) summarySpan.style.color = styles.color;
        container.appendChild(summarySpan);
      }

      return container;
    }

    function createWord(text, styles = {}) {
      const span = document.createElement('span');
      span.textContent = text;
      span.className = 'word';

      // Apply object styles
      if (styles.color) {
        span.style.color = styles.color;
      }
      if (styles.backgroundColor) {
        span.style.backgroundColor = styles.backgroundColor;
      }
      if (styles.fontWeight) {
        span.style.fontWeight = styles.fontWeight;
      }

      return span;
    }

    function testSemanticStyles() {
      const preview = document.getElementById('preview');
      preview.innerHTML = '';

      // Test 1: Basic semantic structure
      preview.appendChild(createSemanticStructure({
        sourceText: 'Detective fiction contrasts horror',
        summary: 'intellectual vs primal',
        relationship: 'supplementary'
      }));

      preview.appendChild(document.createTextNode(' '));

      // Test 2: Semantic + Object styles (red color + italic)
      preview.appendChild(createSemanticStructure({
        sourceText: 'Apple is red',
        summary: 'fruit color',
        relationship: 'supplementary'
      }, { color: 'red' }));

      preview.appendChild(document.createTextNode(' '));

      // Test 3: Promoted semantic (should show bold label)
      preview.appendChild(createSemanticStructure({
        sourceText: 'Important fact',
        summary: 'key insight',
        label: 'KEY POINT',
        relationship: 'supplementary'
      }, { isPromoted: true }));

      preview.appendChild(document.createTextNode(' '));

      // Test 4: Regular object style (no semantic)
      preview.appendChild(createWord('Blue', {
        color: 'blue'
      }));

      preview.appendChild(document.createTextNode(' '));

      // Test 5: Object style + semantic (blue + italic)
      preview.appendChild(createSemanticStructure({
        sourceText: 'Blue sky',
        summary: 'color description',
        relationship: 'supplementary'
      }, { color: 'blue' }));
    }

    // Run test
    testSemanticStyles();
  </script>
</body>

</html>